Terminals unused in grammar

   CMD_EQUALS
   EXPR_AMPERSAND
   EXPR_PIPE
   EXPR_COLON
   UNTERMINATED_LEXING_BLOCK
   ERROR


Grammar

    0 $accept: cmd_root $end

    1 cmd_root: cmd_statements

    2 cmd_statements: cmd_statement
    3               | cmd_statements cmd_terminator cmd_statement

    4 cmd_terminator: CMD_TERMINATING_NEWLINE
    5               | EXPR_TERMINATING_NEWLINE
    6               | CMD_SEMICOLON
    7               | EXPR_SEMICOLON

    8 cmd_optional_whitespace: /* empty */
    9                        | CMD_WHITESPACE
   10                        | CMD_TERMINATING_NEWLINE

   11 cmd_statement: cmd_pipeline CMD_AMPERSAND
   12              | cmd_pipeline
   13              | cmd_assignment
   14              | CMD_COLON expression
   15              | KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   18              | KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   20              | KEYWORD_RETURN CMD_WHITESPACE expression
   21              | /* empty */

   22 cmd_mapping: CMD_DOLLAR VARIABLE cmd_optional_whitespace CMD_MAP cmd_optional_whitespace CMD_DOLLAR VARIABLE cmd_optional_whitespace
   23            | CMD_DOLLAR VARIABLE cmd_optional_whitespace

   24 cmd_assignment: CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration

   27 cmd_pipeline: cmd_instruction
   28             | cmd_pipeline CMD_PIPE cmd_instruction

   29 cmd_instruction: cmd_command
   30                | cmd_function_declaration

   31 cmd_command: cmd_arguments

   32 cmd_arguments: cmd_fragments
   33              | cmd_arguments CMD_WHITESPACE cmd_fragments

   34 cmd_fragments: cmd_fragment
   35              | cmd_fragments cmd_fragment
   36              | cmd_fragments cmd_keyword_as_string

   37 cmd_keyword_as_string: KEYWORD_IF
   38                      | KEYWORD_ELSE
   39                      | KEYWORD_WHILE
   40                      | KEYWORD_FOR
   41                      | KEYWORD_FOREACH
   42                      | KEYWORD_DO
   43                      | KEYWORD_BREAK
   44                      | KEYWORD_CONTINUE
   45                      | KEYWORD_AS

   46 cmd_fragment: cmd_fragment_or_variable
   47             | cmd_number
   48             | SINGLE_QUOTED
   49             | DOUBLE_QUOTED
   50             | CMD_DOLLAR VARIABLE
   51             | CMD_DOLLAR CMD_NUMBER
   52             | CMD_DOLLAR QUESTION_MARK
   53             | CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | CMD_BEGIN_PAREN expression END_PAREN

   56 cmd_number: CMD_NUMBER

   57 cmd_fragment_or_variable: CMD_MAP
   58                         | CMD_FRAGMENT
   59                         | VARIABLE

   60 cmd_function_declaration: CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

   61 expr_fragments_or_function_declaration: expr_fragments
   62                                       | expr_function_declaration

   63 expr_key_values: expr_key_name
   64                | expr_key_name EXPR_EQUALS expr_fragment
   65                | expr_key_values EXPR_COMMA expr_key_name EXPR_EQUALS expr_fragment
   66                | expr_key_values EXPR_COMMA expr_key_name

   67 expr_key_name: expr_fragment_or_variable
   68              | QUESTION_MARK

   69 expr_fragment_or_variable: EXPR_FRAGMENT
   70                          | VARIABLE

   71 expr_function_declaration: EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE

   72 expression: expr_fragment
   73           | expression EXPR_ACCESS expression
   74           | expression EXPR_BEGIN_PAREN END_PAREN
   75           | expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression EXPR_DIVIDE expression
   77           | expression EXPR_MULTIPLY expression
   78           | expression EXPR_ADD expression
   79           | expression EXPR_MINUS expression
   80           | expr_function_declaration

   81 expr_fragments: expr_fragment
   82               | expr_fragments expr_fragment
   83               | expr_fragments expr_keyword_as_string

   84 expr_keyword_as_string: KEYWORD_IF
   85                       | KEYWORD_ELSE
   86                       | KEYWORD_WHILE
   87                       | KEYWORD_FOR
   88                       | KEYWORD_FOREACH
   89                       | KEYWORD_DO
   90                       | KEYWORD_BREAK
   91                       | KEYWORD_CONTINUE
   92                       | KEYWORD_AS

   93 expr_fragment: expr_fragment_or_variable
   94              | expr_number
   95              | PHP
   96              | SINGLE_QUOTED
   97              | DOUBLE_QUOTED
   98              | EXPR_DOLLAR VARIABLE
   99              | EXPR_DOLLAR EXPR_NUMBER
  100              | EXPR_DOLLAR QUESTION_MARK
  101              | EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | EXPR_BEGIN_PAREN expression END_PAREN
  104              | expr_array_decl

  105 expr_array_decl: EXPR_BEGIN_ARRAY END_PAREN
  106                | EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN

  108 expr_array_def: expr_array_element
  109               | expr_array_def EXPR_COMMA expr_array_element

  110 expr_array_element: expr_fragment EXPR_MAP expr_fragment
  111                   | expr_fragment

  112 expr_number: EXPR_NUMBER

  113 expr_comma_arguments: expr_fragments
  114                     | expr_comma_arguments EXPR_COMMA expr_fragments


Terminals, with rules where they appear

$end (0) 0
error (256)
SINGLE_QUOTED (258) 48 96
DOUBLE_QUOTED (259) 49 97
KEYWORD_WHILE (260) 17 18 39 86
KEYWORD_DO (261) 18 42 89
KEYWORD_FOR (262) 40 87
KEYWORD_FOREACH (263) 19 41 88
KEYWORD_BREAK (264) 43 90
KEYWORD_CONTINUE (265) 44 91
KEYWORD_IF (266) 15 16 37 84
KEYWORD_ELSE (267) 15 38 85
KEYWORD_AS (268) 19 45 92
KEYWORD_RETURN (269) 20
VARIABLE (270) 22 23 24 50 59 70 98
END_PAREN (271) 53 54 55 60 71 74 75 101 102 103 105 106 107
BEGIN_BRACE (272) 15 16 17 18 19 60 71
END_BRACE (273) 15 16 17 18 19 60 71
END_SQUARE (274) 26
QUESTION_MARK (275) 52 68 100
CMD_FRAGMENT (276) 58
CMD_MAP (277) 22 57 60
CMD_NUMBER (278) 51 56
CMD_DOLLAR (279) 22 23 50 51 52 54
CMD_AMPERSAND (280) 11
CMD_PIPE (281) 28
CMD_COLON (282) 14 24 25 26
CMD_WHITESPACE (283) 9 20 33
CMD_TERMINATING_NEWLINE (284) 4 10
CMD_BEGIN_COMMAND (285) 53
CMD_BEGIN_PAREN (286) 55 60
CMD_BEGIN_SQUARE (287) 54
CMD_SEMICOLON (288) 6
CMD_EQUALS (289)
PHP (290) 95
EXPR_FRAGMENT (291) 69
EXPR_NUMBER (292) 99 112
EXPR_DOLLAR (293) 24 98 99 100 102
EXPR_ACCESS (294) 25 26 73
EXPR_MAP (295) 71 110
EXPR_AMPERSAND (296)
EXPR_PIPE (297)
EXPR_EQUALS (298) 24 25 26 64 65
EXPR_COMMA (299) 65 66 107 109 114
EXPR_SEMICOLON (300) 7
EXPR_COLON (301)
EXPR_ADD (302) 78
EXPR_MINUS (303) 79
EXPR_MULTIPLY (304) 77
EXPR_DIVIDE (305) 76
EXPR_BEGIN_COMMAND (306) 101
EXPR_BEGIN_ARRAY (307) 105 106 107
EXPR_BEGIN_PAREN (308) 71 74 75 103
EXPR_BEGIN_SQUARE (309) 26 102
EXPR_END_SQUARE_BEGIN_COMMAND (310) 54 102
EXPR_TERMINATING_NEWLINE (311) 5
UNTERMINATED_LEXING_BLOCK (312)
ERROR (313)


Nonterminals, with rules where they appear

$accept (59)
    on left: 0
cmd_root (60)
    on left: 1, on right: 0
cmd_statements (61)
    on left: 2 3, on right: 1 3 15 16 17 18 19 60 71
cmd_terminator (62)
    on left: 4 5 6 7, on right: 3
cmd_optional_whitespace (63)
    on left: 8 9 10, on right: 15 16 17 18 19 22 23 60
cmd_statement (64)
    on left: 11 12 13 14 15 16 17 18 19 20 21, on right: 2 3
cmd_mapping (65)
    on left: 22 23, on right: 19
cmd_assignment (66)
    on left: 24 25 26, on right: 13
cmd_pipeline (67)
    on left: 27 28, on right: 11 12 28 53 54 101 102
cmd_instruction (68)
    on left: 29 30, on right: 27 28
cmd_command (69)
    on left: 31, on right: 29
cmd_arguments (70)
    on left: 32 33, on right: 31 33
cmd_fragments (71)
    on left: 34 35 36, on right: 32 33 35 36
cmd_keyword_as_string (72)
    on left: 37 38 39 40 41 42 43 44 45, on right: 36
cmd_fragment (73)
    on left: 46 47 48 49 50 51 52 53 54 55, on right: 15 16 17 18 19
    34 35
cmd_number (74)
    on left: 56, on right: 47
cmd_fragment_or_variable (75)
    on left: 57 58 59, on right: 46
cmd_function_declaration (76)
    on left: 60, on right: 30
expr_fragments_or_function_declaration (77)
    on left: 61 62, on right: 24 25 26
expr_key_values (78)
    on left: 63 64 65 66, on right: 54 65 66 102
expr_key_name (79)
    on left: 67 68, on right: 63 64 65 66
expr_fragment_or_variable (80)
    on left: 69 70, on right: 67 93
expr_function_declaration (81)
    on left: 71, on right: 62 80
expression (82)
    on left: 72 73 74 75 76 77 78 79 80, on right: 14 20 25 26 55 73
    74 75 76 77 78 79 103
expr_fragments (83)
    on left: 81 82 83, on right: 61 82 83 113 114
expr_keyword_as_string (84)
    on left: 84 85 86 87 88 89 90 91 92, on right: 83
expr_fragment (85)
    on left: 93 94 95 96 97 98 99 100 101 102 103 104, on right: 64
    65 72 81 82 110 111
expr_array_decl (86)
    on left: 105 106 107, on right: 104
expr_array_def (87)
    on left: 108 109, on right: 106 107 109
expr_array_element (88)
    on left: 110 111, on right: 108 109
expr_number (89)
    on left: 112, on right: 94
expr_comma_arguments (90)
    on left: 113 114, on right: 75 114


State 0

    0 $accept: . cmd_root $end
    1 cmd_root: . cmd_statements
    2 cmd_statements: . cmd_statement
    3               | . cmd_statements cmd_terminator cmd_statement
   11 cmd_statement: . cmd_pipeline CMD_AMPERSAND
   12              | . cmd_pipeline
   13              | . cmd_assignment
   14              | . CMD_COLON expression
   15              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   18              | . KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | . KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   20              | . KEYWORD_RETURN CMD_WHITESPACE expression
   21              | .  [$end, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   24 cmd_assignment: . CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | . CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | . CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 3
    KEYWORD_DO         shift, and go to state 4
    KEYWORD_FOREACH    shift, and go to state 5
    KEYWORD_IF         shift, and go to state 6
    KEYWORD_RETURN     shift, and go to state 7
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_COLON          shift, and go to state 13
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    $default  reduce using rule 21 (cmd_statement)

    cmd_root                  go to state 16
    cmd_statements            go to state 17
    cmd_statement             go to state 18
    cmd_assignment            go to state 19
    cmd_pipeline              go to state 20
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 1

   48 cmd_fragment: SINGLE_QUOTED .

    $default  reduce using rule 48 (cmd_fragment)


State 2

   49 cmd_fragment: DOUBLE_QUOTED .

    $default  reduce using rule 49 (cmd_fragment)


State 3

    8 cmd_optional_whitespace: .  [SINGLE_QUOTED, DOUBLE_QUOTED, VARIABLE, CMD_FRAGMENT, CMD_MAP, CMD_NUMBER, CMD_DOLLAR, CMD_BEGIN_COMMAND, CMD_BEGIN_PAREN]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   17 cmd_statement: KEYWORD_WHILE . cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 31


State 4

    8 cmd_optional_whitespace: .  [BEGIN_BRACE]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   18 cmd_statement: KEYWORD_DO . cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 32


State 5

    8 cmd_optional_whitespace: .  [SINGLE_QUOTED, DOUBLE_QUOTED, VARIABLE, CMD_FRAGMENT, CMD_MAP, CMD_NUMBER, CMD_DOLLAR, CMD_BEGIN_COMMAND, CMD_BEGIN_PAREN]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   19 cmd_statement: KEYWORD_FOREACH . cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 33


State 6

    8 cmd_optional_whitespace: .  [SINGLE_QUOTED, DOUBLE_QUOTED, VARIABLE, CMD_FRAGMENT, CMD_MAP, CMD_NUMBER, CMD_DOLLAR, CMD_BEGIN_COMMAND, CMD_BEGIN_PAREN]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   15 cmd_statement: KEYWORD_IF . cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | KEYWORD_IF . cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 34


State 7

   20 cmd_statement: KEYWORD_RETURN . CMD_WHITESPACE expression

    CMD_WHITESPACE  shift, and go to state 35


State 8

   59 cmd_fragment_or_variable: VARIABLE .

    $default  reduce using rule 59 (cmd_fragment_or_variable)


State 9

   58 cmd_fragment_or_variable: CMD_FRAGMENT .

    $default  reduce using rule 58 (cmd_fragment_or_variable)


State 10

   57 cmd_fragment_or_variable: CMD_MAP .

    $default  reduce using rule 57 (cmd_fragment_or_variable)


State 11

   56 cmd_number: CMD_NUMBER .

    $default  reduce using rule 56 (cmd_number)


State 12

   50 cmd_fragment: CMD_DOLLAR . VARIABLE
   51             | CMD_DOLLAR . CMD_NUMBER
   52             | CMD_DOLLAR . QUESTION_MARK
   54             | CMD_DOLLAR . CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN

    VARIABLE          shift, and go to state 36
    QUESTION_MARK     shift, and go to state 37
    CMD_NUMBER        shift, and go to state 38
    CMD_BEGIN_SQUARE  shift, and go to state 39


State 13

   14 cmd_statement: CMD_COLON . expression
   24 cmd_assignment: CMD_COLON . EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | CMD_COLON . expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | CMD_COLON . expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 46
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 52
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 14

   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   53             | CMD_BEGIN_COMMAND . cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    cmd_pipeline              go to state 56
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 15

   55 cmd_fragment: CMD_BEGIN_PAREN . expression END_PAREN
   60 cmd_function_declaration: CMD_BEGIN_PAREN . END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    END_PAREN           shift, and go to state 57
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 59
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 16

    0 $accept: cmd_root . $end

    $end  shift, and go to state 60


State 17

    1 cmd_root: cmd_statements .  [$end]
    3 cmd_statements: cmd_statements . cmd_terminator cmd_statement
    4 cmd_terminator: . CMD_TERMINATING_NEWLINE
    5               | . EXPR_TERMINATING_NEWLINE
    6               | . CMD_SEMICOLON
    7               | . EXPR_SEMICOLON

    CMD_TERMINATING_NEWLINE   shift, and go to state 61
    CMD_SEMICOLON             shift, and go to state 62
    EXPR_SEMICOLON            shift, and go to state 63
    EXPR_TERMINATING_NEWLINE  shift, and go to state 64

    $default  reduce using rule 1 (cmd_root)

    cmd_terminator  go to state 65


State 18

    2 cmd_statements: cmd_statement .

    $default  reduce using rule 2 (cmd_statements)


State 19

   13 cmd_statement: cmd_assignment .

    $default  reduce using rule 13 (cmd_statement)


State 20

   11 cmd_statement: cmd_pipeline . CMD_AMPERSAND
   12              | cmd_pipeline .  [$end, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   28 cmd_pipeline: cmd_pipeline . CMD_PIPE cmd_instruction

    CMD_AMPERSAND  shift, and go to state 66
    CMD_PIPE       shift, and go to state 67

    $default  reduce using rule 12 (cmd_statement)


State 21

   27 cmd_pipeline: cmd_instruction .

    $default  reduce using rule 27 (cmd_pipeline)


State 22

   29 cmd_instruction: cmd_command .

    $default  reduce using rule 29 (cmd_instruction)


State 23

   31 cmd_command: cmd_arguments .  [$end, END_PAREN, END_BRACE, CMD_AMPERSAND, CMD_PIPE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   33 cmd_arguments: cmd_arguments . CMD_WHITESPACE cmd_fragments

    CMD_WHITESPACE  shift, and go to state 68

    $default  reduce using rule 31 (cmd_command)


State 24

   32 cmd_arguments: cmd_fragments .  [$end, END_PAREN, END_BRACE, CMD_AMPERSAND, CMD_PIPE, CMD_WHITESPACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   35 cmd_fragments: cmd_fragments . cmd_fragment
   36              | cmd_fragments . cmd_keyword_as_string
   37 cmd_keyword_as_string: . KEYWORD_IF
   38                      | . KEYWORD_ELSE
   39                      | . KEYWORD_WHILE
   40                      | . KEYWORD_FOR
   41                      | . KEYWORD_FOREACH
   42                      | . KEYWORD_DO
   43                      | . KEYWORD_BREAK
   44                      | . KEYWORD_CONTINUE
   45                      | . KEYWORD_AS
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 69
    KEYWORD_DO         shift, and go to state 70
    KEYWORD_FOR        shift, and go to state 71
    KEYWORD_FOREACH    shift, and go to state 72
    KEYWORD_BREAK      shift, and go to state 73
    KEYWORD_CONTINUE   shift, and go to state 74
    KEYWORD_IF         shift, and go to state 75
    KEYWORD_ELSE       shift, and go to state 76
    KEYWORD_AS         shift, and go to state 77
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 78

    $default  reduce using rule 32 (cmd_arguments)

    cmd_keyword_as_string     go to state 79
    cmd_fragment              go to state 80
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27


State 25

   34 cmd_fragments: cmd_fragment .

    $default  reduce using rule 34 (cmd_fragments)


State 26

   47 cmd_fragment: cmd_number .

    $default  reduce using rule 47 (cmd_fragment)


State 27

   46 cmd_fragment: cmd_fragment_or_variable .

    $default  reduce using rule 46 (cmd_fragment)


State 28

   30 cmd_instruction: cmd_function_declaration .

    $default  reduce using rule 30 (cmd_instruction)


State 29

    9 cmd_optional_whitespace: CMD_WHITESPACE .

    $default  reduce using rule 9 (cmd_optional_whitespace)


State 30

   10 cmd_optional_whitespace: CMD_TERMINATING_NEWLINE .

    $default  reduce using rule 10 (cmd_optional_whitespace)


State 31

   17 cmd_statement: KEYWORD_WHILE cmd_optional_whitespace . cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 78

    cmd_fragment              go to state 81
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27


State 32

   18 cmd_statement: KEYWORD_DO cmd_optional_whitespace . BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment

    BEGIN_BRACE  shift, and go to state 82


State 33

   19 cmd_statement: KEYWORD_FOREACH cmd_optional_whitespace . cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 78

    cmd_fragment              go to state 83
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27


State 34

   15 cmd_statement: KEYWORD_IF cmd_optional_whitespace . cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | KEYWORD_IF cmd_optional_whitespace . cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 78

    cmd_fragment              go to state 84
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27


State 35

   20 cmd_statement: KEYWORD_RETURN CMD_WHITESPACE . expression
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 85
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 36

   50 cmd_fragment: CMD_DOLLAR VARIABLE .

    $default  reduce using rule 50 (cmd_fragment)


State 37

   52 cmd_fragment: CMD_DOLLAR QUESTION_MARK .

    $default  reduce using rule 52 (cmd_fragment)


State 38

   51 cmd_fragment: CMD_DOLLAR CMD_NUMBER .

    $default  reduce using rule 51 (cmd_fragment)


State 39

   54 cmd_fragment: CMD_DOLLAR CMD_BEGIN_SQUARE . expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   63 expr_key_values: . expr_key_name
   64                | . expr_key_name EXPR_EQUALS expr_fragment
   65                | . expr_key_values EXPR_COMMA expr_key_name EXPR_EQUALS expr_fragment
   66                | . expr_key_values EXPR_COMMA expr_key_name
   67 expr_key_name: . expr_fragment_or_variable
   68              | . QUESTION_MARK
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE

    VARIABLE       shift, and go to state 42
    QUESTION_MARK  shift, and go to state 86
    EXPR_FRAGMENT  shift, and go to state 44

    expr_key_values            go to state 87
    expr_key_name              go to state 88
    expr_fragment_or_variable  go to state 89


State 40

   96 expr_fragment: SINGLE_QUOTED .

    $default  reduce using rule 96 (expr_fragment)


State 41

   97 expr_fragment: DOUBLE_QUOTED .

    $default  reduce using rule 97 (expr_fragment)


State 42

   70 expr_fragment_or_variable: VARIABLE .

    $default  reduce using rule 70 (expr_fragment_or_variable)


State 43

   95 expr_fragment: PHP .

    $default  reduce using rule 95 (expr_fragment)


State 44

   69 expr_fragment_or_variable: EXPR_FRAGMENT .

    $default  reduce using rule 69 (expr_fragment_or_variable)


State 45

  112 expr_number: EXPR_NUMBER .

    $default  reduce using rule 112 (expr_number)


State 46

   24 cmd_assignment: CMD_COLON EXPR_DOLLAR . VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   98 expr_fragment: EXPR_DOLLAR . VARIABLE
   99              | EXPR_DOLLAR . EXPR_NUMBER
  100              | EXPR_DOLLAR . QUESTION_MARK
  102              | EXPR_DOLLAR . EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN

    VARIABLE           shift, and go to state 90
    QUESTION_MARK      shift, and go to state 91
    EXPR_NUMBER        shift, and go to state 92
    EXPR_BEGIN_SQUARE  shift, and go to state 93


State 47

   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
  101 expr_fragment: EXPR_BEGIN_COMMAND . cmd_pipeline END_PAREN

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    cmd_pipeline              go to state 94
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 48

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  105                | EXPR_BEGIN_ARRAY . END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  106                | EXPR_BEGIN_ARRAY . expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  107                | EXPR_BEGIN_ARRAY . expr_array_def EXPR_COMMA END_PAREN
  108 expr_array_def: . expr_array_element
  109               | . expr_array_def EXPR_COMMA expr_array_element
  110 expr_array_element: . expr_fragment EXPR_MAP expr_fragment
  111                   | . expr_fragment
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    END_PAREN           shift, and go to state 95
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    expr_fragment_or_variable  go to state 50
    expr_fragment              go to state 97
    expr_array_decl            go to state 54
    expr_array_def             go to state 98
    expr_array_element         go to state 99
    expr_number                go to state 55


State 49

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   71                          | EXPR_BEGIN_PAREN . END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  103              | EXPR_BEGIN_PAREN . expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    END_PAREN           shift, and go to state 100
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 101
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 50

   93 expr_fragment: expr_fragment_or_variable .

    $default  reduce using rule 93 (expr_fragment)


State 51

   80 expression: expr_function_declaration .

    $default  reduce using rule 80 (expression)


State 52

   14 cmd_statement: CMD_COLON expression .  [$end, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   25 cmd_assignment: CMD_COLON expression . EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | CMD_COLON expression . EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   73 expression: expression . EXPR_ACCESS expression
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   77           | expression . EXPR_MULTIPLY expression
   78           | expression . EXPR_ADD expression
   79           | expression . EXPR_MINUS expression

    EXPR_ACCESS       shift, and go to state 102
    EXPR_ADD          shift, and go to state 103
    EXPR_MINUS        shift, and go to state 104
    EXPR_MULTIPLY     shift, and go to state 105
    EXPR_DIVIDE       shift, and go to state 106
    EXPR_BEGIN_PAREN  shift, and go to state 107

    $default  reduce using rule 14 (cmd_statement)


State 53

   72 expression: expr_fragment .

    $default  reduce using rule 72 (expression)


State 54

  104 expr_fragment: expr_array_decl .

    $default  reduce using rule 104 (expr_fragment)


State 55

   94 expr_fragment: expr_number .

    $default  reduce using rule 94 (expr_fragment)


State 56

   28 cmd_pipeline: cmd_pipeline . CMD_PIPE cmd_instruction
   53 cmd_fragment: CMD_BEGIN_COMMAND cmd_pipeline . END_PAREN

    END_PAREN  shift, and go to state 108
    CMD_PIPE   shift, and go to state 67


State 57

    8 cmd_optional_whitespace: .  [CMD_MAP]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   60 cmd_function_declaration: CMD_BEGIN_PAREN END_PAREN . cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 109


State 58

   98 expr_fragment: EXPR_DOLLAR . VARIABLE
   99              | EXPR_DOLLAR . EXPR_NUMBER
  100              | EXPR_DOLLAR . QUESTION_MARK
  102              | EXPR_DOLLAR . EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN

    VARIABLE           shift, and go to state 110
    QUESTION_MARK      shift, and go to state 91
    EXPR_NUMBER        shift, and go to state 92
    EXPR_BEGIN_SQUARE  shift, and go to state 93


State 59

   55 cmd_fragment: CMD_BEGIN_PAREN expression . END_PAREN
   73 expression: expression . EXPR_ACCESS expression
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   77           | expression . EXPR_MULTIPLY expression
   78           | expression . EXPR_ADD expression
   79           | expression . EXPR_MINUS expression

    END_PAREN         shift, and go to state 111
    EXPR_ACCESS       shift, and go to state 112
    EXPR_ADD          shift, and go to state 103
    EXPR_MINUS        shift, and go to state 104
    EXPR_MULTIPLY     shift, and go to state 105
    EXPR_DIVIDE       shift, and go to state 106
    EXPR_BEGIN_PAREN  shift, and go to state 107


State 60

    0 $accept: cmd_root $end .

    $default  accept


State 61

    4 cmd_terminator: CMD_TERMINATING_NEWLINE .

    $default  reduce using rule 4 (cmd_terminator)


State 62

    6 cmd_terminator: CMD_SEMICOLON .

    $default  reduce using rule 6 (cmd_terminator)


State 63

    7 cmd_terminator: EXPR_SEMICOLON .

    $default  reduce using rule 7 (cmd_terminator)


State 64

    5 cmd_terminator: EXPR_TERMINATING_NEWLINE .

    $default  reduce using rule 5 (cmd_terminator)


State 65

    3 cmd_statements: cmd_statements cmd_terminator . cmd_statement
   11 cmd_statement: . cmd_pipeline CMD_AMPERSAND
   12              | . cmd_pipeline
   13              | . cmd_assignment
   14              | . CMD_COLON expression
   15              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   18              | . KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | . KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   20              | . KEYWORD_RETURN CMD_WHITESPACE expression
   21              | .  [$end, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   24 cmd_assignment: . CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | . CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | . CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 3
    KEYWORD_DO         shift, and go to state 4
    KEYWORD_FOREACH    shift, and go to state 5
    KEYWORD_IF         shift, and go to state 6
    KEYWORD_RETURN     shift, and go to state 7
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_COLON          shift, and go to state 13
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    $default  reduce using rule 21 (cmd_statement)

    cmd_statement             go to state 113
    cmd_assignment            go to state 19
    cmd_pipeline              go to state 20
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 66

   11 cmd_statement: cmd_pipeline CMD_AMPERSAND .

    $default  reduce using rule 11 (cmd_statement)


State 67

   28 cmd_pipeline: cmd_pipeline CMD_PIPE . cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    cmd_instruction           go to state 114
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 68

   33 cmd_arguments: cmd_arguments CMD_WHITESPACE . cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 78

    cmd_fragments             go to state 115
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27


State 69

   39 cmd_keyword_as_string: KEYWORD_WHILE .

    $default  reduce using rule 39 (cmd_keyword_as_string)


State 70

   42 cmd_keyword_as_string: KEYWORD_DO .

    $default  reduce using rule 42 (cmd_keyword_as_string)


State 71

   40 cmd_keyword_as_string: KEYWORD_FOR .

    $default  reduce using rule 40 (cmd_keyword_as_string)


State 72

   41 cmd_keyword_as_string: KEYWORD_FOREACH .

    $default  reduce using rule 41 (cmd_keyword_as_string)


State 73

   43 cmd_keyword_as_string: KEYWORD_BREAK .

    $default  reduce using rule 43 (cmd_keyword_as_string)


State 74

   44 cmd_keyword_as_string: KEYWORD_CONTINUE .

    $default  reduce using rule 44 (cmd_keyword_as_string)


State 75

   37 cmd_keyword_as_string: KEYWORD_IF .

    $default  reduce using rule 37 (cmd_keyword_as_string)


State 76

   38 cmd_keyword_as_string: KEYWORD_ELSE .

    $default  reduce using rule 38 (cmd_keyword_as_string)


State 77

   45 cmd_keyword_as_string: KEYWORD_AS .

    $default  reduce using rule 45 (cmd_keyword_as_string)


State 78

   55 cmd_fragment: CMD_BEGIN_PAREN . expression END_PAREN
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 59
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 79

   36 cmd_fragments: cmd_fragments cmd_keyword_as_string .

    $default  reduce using rule 36 (cmd_fragments)


State 80

   35 cmd_fragments: cmd_fragments cmd_fragment .

    $default  reduce using rule 35 (cmd_fragments)


State 81

    8 cmd_optional_whitespace: .  [BEGIN_BRACE]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   17 cmd_statement: KEYWORD_WHILE cmd_optional_whitespace cmd_fragment . cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 116


State 82

    2 cmd_statements: . cmd_statement
    3               | . cmd_statements cmd_terminator cmd_statement
   11 cmd_statement: . cmd_pipeline CMD_AMPERSAND
   12              | . cmd_pipeline
   13              | . cmd_assignment
   14              | . CMD_COLON expression
   15              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   18              | . KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   18              | KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE . cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | . KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   20              | . KEYWORD_RETURN CMD_WHITESPACE expression
   21              | .  [END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   24 cmd_assignment: . CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | . CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | . CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 3
    KEYWORD_DO         shift, and go to state 4
    KEYWORD_FOREACH    shift, and go to state 5
    KEYWORD_IF         shift, and go to state 6
    KEYWORD_RETURN     shift, and go to state 7
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_COLON          shift, and go to state 13
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    $default  reduce using rule 21 (cmd_statement)

    cmd_statements            go to state 117
    cmd_statement             go to state 18
    cmd_assignment            go to state 19
    cmd_pipeline              go to state 20
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 83

    8 cmd_optional_whitespace: .  [KEYWORD_AS]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   19 cmd_statement: KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment . cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 118


State 84

    8 cmd_optional_whitespace: .  [BEGIN_BRACE]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   15 cmd_statement: KEYWORD_IF cmd_optional_whitespace cmd_fragment . cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | KEYWORD_IF cmd_optional_whitespace cmd_fragment . cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 119


State 85

   20 cmd_statement: KEYWORD_RETURN CMD_WHITESPACE expression .  [$end, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   73 expression: expression . EXPR_ACCESS expression
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   77           | expression . EXPR_MULTIPLY expression
   78           | expression . EXPR_ADD expression
   79           | expression . EXPR_MINUS expression

    EXPR_ACCESS       shift, and go to state 112
    EXPR_ADD          shift, and go to state 103
    EXPR_MINUS        shift, and go to state 104
    EXPR_MULTIPLY     shift, and go to state 105
    EXPR_DIVIDE       shift, and go to state 106
    EXPR_BEGIN_PAREN  shift, and go to state 107

    $default  reduce using rule 20 (cmd_statement)


State 86

   68 expr_key_name: QUESTION_MARK .

    $default  reduce using rule 68 (expr_key_name)


State 87

   54 cmd_fragment: CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values . EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   65 expr_key_values: expr_key_values . EXPR_COMMA expr_key_name EXPR_EQUALS expr_fragment
   66                | expr_key_values . EXPR_COMMA expr_key_name

    EXPR_COMMA                     shift, and go to state 120
    EXPR_END_SQUARE_BEGIN_COMMAND  shift, and go to state 121


State 88

   63 expr_key_values: expr_key_name .  [EXPR_COMMA, EXPR_END_SQUARE_BEGIN_COMMAND]
   64                | expr_key_name . EXPR_EQUALS expr_fragment

    EXPR_EQUALS  shift, and go to state 122

    $default  reduce using rule 63 (expr_key_values)


State 89

   67 expr_key_name: expr_fragment_or_variable .

    $default  reduce using rule 67 (expr_key_name)


State 90

   24 cmd_assignment: CMD_COLON EXPR_DOLLAR VARIABLE . EXPR_EQUALS expr_fragments_or_function_declaration
   98 expr_fragment: EXPR_DOLLAR VARIABLE .  [$end, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_ACCESS, EXPR_SEMICOLON, EXPR_ADD, EXPR_MINUS, EXPR_MULTIPLY, EXPR_DIVIDE, EXPR_BEGIN_PAREN, EXPR_TERMINATING_NEWLINE]

    EXPR_EQUALS  shift, and go to state 123

    $default  reduce using rule 98 (expr_fragment)


State 91

  100 expr_fragment: EXPR_DOLLAR QUESTION_MARK .

    $default  reduce using rule 100 (expr_fragment)


State 92

   99 expr_fragment: EXPR_DOLLAR EXPR_NUMBER .

    $default  reduce using rule 99 (expr_fragment)


State 93

   63 expr_key_values: . expr_key_name
   64                | . expr_key_name EXPR_EQUALS expr_fragment
   65                | . expr_key_values EXPR_COMMA expr_key_name EXPR_EQUALS expr_fragment
   66                | . expr_key_values EXPR_COMMA expr_key_name
   67 expr_key_name: . expr_fragment_or_variable
   68              | . QUESTION_MARK
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
  102 expr_fragment: EXPR_DOLLAR EXPR_BEGIN_SQUARE . expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN

    VARIABLE       shift, and go to state 42
    QUESTION_MARK  shift, and go to state 86
    EXPR_FRAGMENT  shift, and go to state 44

    expr_key_values            go to state 124
    expr_key_name              go to state 88
    expr_fragment_or_variable  go to state 89


State 94

   28 cmd_pipeline: cmd_pipeline . CMD_PIPE cmd_instruction
  101 expr_fragment: EXPR_BEGIN_COMMAND cmd_pipeline . END_PAREN

    END_PAREN  shift, and go to state 125
    CMD_PIPE   shift, and go to state 67


State 95

  105 expr_array_decl: EXPR_BEGIN_ARRAY END_PAREN .

    $default  reduce using rule 105 (expr_array_decl)


State 96

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  103              | EXPR_BEGIN_PAREN . expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 101
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 97

  110 expr_array_element: expr_fragment . EXPR_MAP expr_fragment
  111                   | expr_fragment .  [END_PAREN, EXPR_COMMA]

    EXPR_MAP  shift, and go to state 126

    $default  reduce using rule 111 (expr_array_element)


State 98

  106 expr_array_decl: EXPR_BEGIN_ARRAY expr_array_def . END_PAREN
  107                | EXPR_BEGIN_ARRAY expr_array_def . EXPR_COMMA END_PAREN
  109 expr_array_def: expr_array_def . EXPR_COMMA expr_array_element

    END_PAREN   shift, and go to state 127
    EXPR_COMMA  shift, and go to state 128


State 99

  108 expr_array_def: expr_array_element .

    $default  reduce using rule 108 (expr_array_def)


State 100

   71 expr_function_declaration: EXPR_BEGIN_PAREN END_PAREN . EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE

    EXPR_MAP  shift, and go to state 129


State 101

   73 expression: expression . EXPR_ACCESS expression
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   77           | expression . EXPR_MULTIPLY expression
   78           | expression . EXPR_ADD expression
   79           | expression . EXPR_MINUS expression
  103 expr_fragment: EXPR_BEGIN_PAREN expression . END_PAREN

    END_PAREN         shift, and go to state 130
    EXPR_ACCESS       shift, and go to state 112
    EXPR_ADD          shift, and go to state 103
    EXPR_MINUS        shift, and go to state 104
    EXPR_MULTIPLY     shift, and go to state 105
    EXPR_DIVIDE       shift, and go to state 106
    EXPR_BEGIN_PAREN  shift, and go to state 107


State 102

   25 cmd_assignment: CMD_COLON expression EXPR_ACCESS . expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | CMD_COLON expression EXPR_ACCESS . EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   73           | expression EXPR_ACCESS . expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49
    EXPR_BEGIN_SQUARE   shift, and go to state 131

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 132
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 103

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   78           | expression EXPR_ADD . expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 133
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 104

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   79           | expression EXPR_MINUS . expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 134
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 105

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   77           | expression EXPR_MULTIPLY . expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 135
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 106

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   76           | expression EXPR_DIVIDE . expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 136
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 107

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   74 expression: expression EXPR_BEGIN_PAREN . END_PAREN
   75           | expression EXPR_BEGIN_PAREN . expr_comma_arguments END_PAREN
   81 expr_fragments: . expr_fragment
   82               | . expr_fragments expr_fragment
   83               | . expr_fragments expr_keyword_as_string
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER
  113 expr_comma_arguments: . expr_fragments
  114                     | . expr_comma_arguments EXPR_COMMA expr_fragments

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    END_PAREN           shift, and go to state 137
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    expr_fragment_or_variable  go to state 50
    expr_fragments             go to state 138
    expr_fragment              go to state 139
    expr_array_decl            go to state 54
    expr_number                go to state 55
    expr_comma_arguments       go to state 140


State 108

   53 cmd_fragment: CMD_BEGIN_COMMAND cmd_pipeline END_PAREN .

    $default  reduce using rule 53 (cmd_fragment)


State 109

   60 cmd_function_declaration: CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace . CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    CMD_MAP  shift, and go to state 141


State 110

   98 expr_fragment: EXPR_DOLLAR VARIABLE .

    $default  reduce using rule 98 (expr_fragment)


State 111

   55 cmd_fragment: CMD_BEGIN_PAREN expression END_PAREN .

    $default  reduce using rule 55 (cmd_fragment)


State 112

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   72 expression: . expr_fragment
   73           | . expression EXPR_ACCESS expression
   73           | expression EXPR_ACCESS . expression
   74           | . expression EXPR_BEGIN_PAREN END_PAREN
   75           | . expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | . expression EXPR_DIVIDE expression
   77           | . expression EXPR_MULTIPLY expression
   78           | . expression EXPR_ADD expression
   79           | . expression EXPR_MINUS expression
   80           | . expr_function_declaration
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragment_or_variable  go to state 50
    expr_function_declaration  go to state 51
    expression                 go to state 142
    expr_fragment              go to state 53
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 113

    3 cmd_statements: cmd_statements cmd_terminator cmd_statement .

    $default  reduce using rule 3 (cmd_statements)


State 114

   28 cmd_pipeline: cmd_pipeline CMD_PIPE cmd_instruction .

    $default  reduce using rule 28 (cmd_pipeline)


State 115

   33 cmd_arguments: cmd_arguments CMD_WHITESPACE cmd_fragments .  [$end, END_PAREN, END_BRACE, CMD_AMPERSAND, CMD_PIPE, CMD_WHITESPACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   35 cmd_fragments: cmd_fragments . cmd_fragment
   36              | cmd_fragments . cmd_keyword_as_string
   37 cmd_keyword_as_string: . KEYWORD_IF
   38                      | . KEYWORD_ELSE
   39                      | . KEYWORD_WHILE
   40                      | . KEYWORD_FOR
   41                      | . KEYWORD_FOREACH
   42                      | . KEYWORD_DO
   43                      | . KEYWORD_BREAK
   44                      | . KEYWORD_CONTINUE
   45                      | . KEYWORD_AS
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 69
    KEYWORD_DO         shift, and go to state 70
    KEYWORD_FOR        shift, and go to state 71
    KEYWORD_FOREACH    shift, and go to state 72
    KEYWORD_BREAK      shift, and go to state 73
    KEYWORD_CONTINUE   shift, and go to state 74
    KEYWORD_IF         shift, and go to state 75
    KEYWORD_ELSE       shift, and go to state 76
    KEYWORD_AS         shift, and go to state 77
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 78

    $default  reduce using rule 33 (cmd_arguments)

    cmd_keyword_as_string     go to state 79
    cmd_fragment              go to state 80
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27


State 116

   17 cmd_statement: KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace . BEGIN_BRACE cmd_statements END_BRACE

    BEGIN_BRACE  shift, and go to state 143


State 117

    3 cmd_statements: cmd_statements . cmd_terminator cmd_statement
    4 cmd_terminator: . CMD_TERMINATING_NEWLINE
    5               | . EXPR_TERMINATING_NEWLINE
    6               | . CMD_SEMICOLON
    7               | . EXPR_SEMICOLON
   18 cmd_statement: KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements . END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment

    END_BRACE                 shift, and go to state 144
    CMD_TERMINATING_NEWLINE   shift, and go to state 61
    CMD_SEMICOLON             shift, and go to state 62
    EXPR_SEMICOLON            shift, and go to state 63
    EXPR_TERMINATING_NEWLINE  shift, and go to state 64

    cmd_terminator  go to state 65


State 118

   19 cmd_statement: KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace . KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE

    KEYWORD_AS  shift, and go to state 145


State 119

   15 cmd_statement: KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace . BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace . BEGIN_BRACE cmd_statements END_BRACE

    BEGIN_BRACE  shift, and go to state 146


State 120

   65 expr_key_values: expr_key_values EXPR_COMMA . expr_key_name EXPR_EQUALS expr_fragment
   66                | expr_key_values EXPR_COMMA . expr_key_name
   67 expr_key_name: . expr_fragment_or_variable
   68              | . QUESTION_MARK
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE

    VARIABLE       shift, and go to state 42
    QUESTION_MARK  shift, and go to state 86
    EXPR_FRAGMENT  shift, and go to state 44

    expr_key_name              go to state 147
    expr_fragment_or_variable  go to state 89


State 121

   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND . cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    cmd_pipeline              go to state 148
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 122

   64 expr_key_values: expr_key_name EXPR_EQUALS . expr_fragment
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    expr_fragment_or_variable  go to state 50
    expr_fragment              go to state 149
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 123

   24 cmd_assignment: CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS . expr_fragments_or_function_declaration
   61 expr_fragments_or_function_declaration: . expr_fragments
   62                                       | . expr_function_declaration
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   81 expr_fragments: . expr_fragment
   82               | . expr_fragments expr_fragment
   83               | . expr_fragments expr_keyword_as_string
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragments_or_function_declaration  go to state 150
    expr_fragment_or_variable               go to state 50
    expr_function_declaration               go to state 151
    expr_fragments                          go to state 152
    expr_fragment                           go to state 139
    expr_array_decl                         go to state 54
    expr_number                             go to state 55


State 124

   65 expr_key_values: expr_key_values . EXPR_COMMA expr_key_name EXPR_EQUALS expr_fragment
   66                | expr_key_values . EXPR_COMMA expr_key_name
  102 expr_fragment: EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values . EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN

    EXPR_COMMA                     shift, and go to state 120
    EXPR_END_SQUARE_BEGIN_COMMAND  shift, and go to state 153


State 125

  101 expr_fragment: EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN .

    $default  reduce using rule 101 (expr_fragment)


State 126

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  110 expr_array_element: expr_fragment EXPR_MAP . expr_fragment
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    expr_fragment_or_variable  go to state 50
    expr_fragment              go to state 154
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 127

  106 expr_array_decl: EXPR_BEGIN_ARRAY expr_array_def END_PAREN .

    $default  reduce using rule 106 (expr_array_decl)


State 128

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  107                | EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA . END_PAREN
  109 expr_array_def: expr_array_def EXPR_COMMA . expr_array_element
  110 expr_array_element: . expr_fragment EXPR_MAP expr_fragment
  111                   | . expr_fragment
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    END_PAREN           shift, and go to state 155
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    expr_fragment_or_variable  go to state 50
    expr_fragment              go to state 97
    expr_array_decl            go to state 54
    expr_array_element         go to state 156
    expr_number                go to state 55


State 129

   71 expr_function_declaration: EXPR_BEGIN_PAREN END_PAREN EXPR_MAP . BEGIN_BRACE cmd_statements END_BRACE

    BEGIN_BRACE  shift, and go to state 157


State 130

  103 expr_fragment: EXPR_BEGIN_PAREN expression END_PAREN .

    $default  reduce using rule 103 (expr_fragment)


State 131

   26 cmd_assignment: CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE . END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration

    END_SQUARE  shift, and go to state 158


State 132

   25 cmd_assignment: CMD_COLON expression EXPR_ACCESS expression . EXPR_EQUALS expr_fragments_or_function_declaration
   73 expression: expression . EXPR_ACCESS expression
   73           | expression EXPR_ACCESS expression .  [$end, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_ACCESS, EXPR_SEMICOLON, EXPR_ADD, EXPR_MINUS, EXPR_MULTIPLY, EXPR_DIVIDE, EXPR_BEGIN_PAREN, EXPR_TERMINATING_NEWLINE]
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   77           | expression . EXPR_MULTIPLY expression
   78           | expression . EXPR_ADD expression
   79           | expression . EXPR_MINUS expression

    EXPR_EQUALS  shift, and go to state 159

    $default  reduce using rule 73 (expression)

    Conflict between rule 73 and token EXPR_ACCESS resolved as reduce (%left EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_ADD resolved as reduce (EXPR_ADD < EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_MINUS resolved as reduce (EXPR_MINUS < EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_MULTIPLY resolved as reduce (EXPR_MULTIPLY < EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_DIVIDE resolved as reduce (EXPR_DIVIDE < EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_BEGIN_PAREN resolved as reduce (EXPR_BEGIN_PAREN < EXPR_ACCESS).


State 133

   73 expression: expression . EXPR_ACCESS expression
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   77           | expression . EXPR_MULTIPLY expression
   78           | expression . EXPR_ADD expression
   78           | expression EXPR_ADD expression .  [$end, END_PAREN, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_EQUALS, EXPR_SEMICOLON, EXPR_ADD, EXPR_MINUS, EXPR_TERMINATING_NEWLINE]
   79           | expression . EXPR_MINUS expression

    EXPR_ACCESS       shift, and go to state 112
    EXPR_MULTIPLY     shift, and go to state 105
    EXPR_DIVIDE       shift, and go to state 106
    EXPR_BEGIN_PAREN  shift, and go to state 107

    $default  reduce using rule 78 (expression)

    Conflict between rule 78 and token EXPR_ACCESS resolved as shift (EXPR_ADD < EXPR_ACCESS).
    Conflict between rule 78 and token EXPR_ADD resolved as reduce (%left EXPR_ADD).
    Conflict between rule 78 and token EXPR_MINUS resolved as reduce (%left EXPR_MINUS).
    Conflict between rule 78 and token EXPR_MULTIPLY resolved as shift (EXPR_ADD < EXPR_MULTIPLY).
    Conflict between rule 78 and token EXPR_DIVIDE resolved as shift (EXPR_ADD < EXPR_DIVIDE).
    Conflict between rule 78 and token EXPR_BEGIN_PAREN resolved as shift (EXPR_ADD < EXPR_BEGIN_PAREN).


State 134

   73 expression: expression . EXPR_ACCESS expression
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   77           | expression . EXPR_MULTIPLY expression
   78           | expression . EXPR_ADD expression
   79           | expression . EXPR_MINUS expression
   79           | expression EXPR_MINUS expression .  [$end, END_PAREN, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_EQUALS, EXPR_SEMICOLON, EXPR_ADD, EXPR_MINUS, EXPR_TERMINATING_NEWLINE]

    EXPR_ACCESS       shift, and go to state 112
    EXPR_MULTIPLY     shift, and go to state 105
    EXPR_DIVIDE       shift, and go to state 106
    EXPR_BEGIN_PAREN  shift, and go to state 107

    $default  reduce using rule 79 (expression)

    Conflict between rule 79 and token EXPR_ACCESS resolved as shift (EXPR_MINUS < EXPR_ACCESS).
    Conflict between rule 79 and token EXPR_ADD resolved as reduce (%left EXPR_ADD).
    Conflict between rule 79 and token EXPR_MINUS resolved as reduce (%left EXPR_MINUS).
    Conflict between rule 79 and token EXPR_MULTIPLY resolved as shift (EXPR_MINUS < EXPR_MULTIPLY).
    Conflict between rule 79 and token EXPR_DIVIDE resolved as shift (EXPR_MINUS < EXPR_DIVIDE).
    Conflict between rule 79 and token EXPR_BEGIN_PAREN resolved as shift (EXPR_MINUS < EXPR_BEGIN_PAREN).


State 135

   73 expression: expression . EXPR_ACCESS expression
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   77           | expression . EXPR_MULTIPLY expression
   77           | expression EXPR_MULTIPLY expression .  [$end, END_PAREN, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_EQUALS, EXPR_SEMICOLON, EXPR_ADD, EXPR_MINUS, EXPR_MULTIPLY, EXPR_DIVIDE, EXPR_TERMINATING_NEWLINE]
   78           | expression . EXPR_ADD expression
   79           | expression . EXPR_MINUS expression

    EXPR_ACCESS       shift, and go to state 112
    EXPR_BEGIN_PAREN  shift, and go to state 107

    $default  reduce using rule 77 (expression)

    Conflict between rule 77 and token EXPR_ACCESS resolved as shift (EXPR_MULTIPLY < EXPR_ACCESS).
    Conflict between rule 77 and token EXPR_ADD resolved as reduce (EXPR_ADD < EXPR_MULTIPLY).
    Conflict between rule 77 and token EXPR_MINUS resolved as reduce (EXPR_MINUS < EXPR_MULTIPLY).
    Conflict between rule 77 and token EXPR_MULTIPLY resolved as reduce (%left EXPR_MULTIPLY).
    Conflict between rule 77 and token EXPR_DIVIDE resolved as reduce (%left EXPR_DIVIDE).
    Conflict between rule 77 and token EXPR_BEGIN_PAREN resolved as shift (EXPR_MULTIPLY < EXPR_BEGIN_PAREN).


State 136

   73 expression: expression . EXPR_ACCESS expression
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   76           | expression EXPR_DIVIDE expression .  [$end, END_PAREN, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_EQUALS, EXPR_SEMICOLON, EXPR_ADD, EXPR_MINUS, EXPR_MULTIPLY, EXPR_DIVIDE, EXPR_TERMINATING_NEWLINE]
   77           | expression . EXPR_MULTIPLY expression
   78           | expression . EXPR_ADD expression
   79           | expression . EXPR_MINUS expression

    EXPR_ACCESS       shift, and go to state 112
    EXPR_BEGIN_PAREN  shift, and go to state 107

    $default  reduce using rule 76 (expression)

    Conflict between rule 76 and token EXPR_ACCESS resolved as shift (EXPR_DIVIDE < EXPR_ACCESS).
    Conflict between rule 76 and token EXPR_ADD resolved as reduce (EXPR_ADD < EXPR_DIVIDE).
    Conflict between rule 76 and token EXPR_MINUS resolved as reduce (EXPR_MINUS < EXPR_DIVIDE).
    Conflict between rule 76 and token EXPR_MULTIPLY resolved as reduce (%left EXPR_MULTIPLY).
    Conflict between rule 76 and token EXPR_DIVIDE resolved as reduce (%left EXPR_DIVIDE).
    Conflict between rule 76 and token EXPR_BEGIN_PAREN resolved as shift (EXPR_DIVIDE < EXPR_BEGIN_PAREN).


State 137

   74 expression: expression EXPR_BEGIN_PAREN END_PAREN .

    $default  reduce using rule 74 (expression)


State 138

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   82 expr_fragments: expr_fragments . expr_fragment
   83               | expr_fragments . expr_keyword_as_string
   84 expr_keyword_as_string: . KEYWORD_IF
   85                       | . KEYWORD_ELSE
   86                       | . KEYWORD_WHILE
   87                       | . KEYWORD_FOR
   88                       | . KEYWORD_FOREACH
   89                       | . KEYWORD_DO
   90                       | . KEYWORD_BREAK
   91                       | . KEYWORD_CONTINUE
   92                       | . KEYWORD_AS
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER
  113 expr_comma_arguments: expr_fragments .  [END_PAREN, EXPR_COMMA]

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    KEYWORD_WHILE       shift, and go to state 160
    KEYWORD_DO          shift, and go to state 161
    KEYWORD_FOR         shift, and go to state 162
    KEYWORD_FOREACH     shift, and go to state 163
    KEYWORD_BREAK       shift, and go to state 164
    KEYWORD_CONTINUE    shift, and go to state 165
    KEYWORD_IF          shift, and go to state 166
    KEYWORD_ELSE        shift, and go to state 167
    KEYWORD_AS          shift, and go to state 168
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    $default  reduce using rule 113 (expr_comma_arguments)

    expr_fragment_or_variable  go to state 50
    expr_keyword_as_string     go to state 169
    expr_fragment              go to state 170
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 139

   81 expr_fragments: expr_fragment .

    $default  reduce using rule 81 (expr_fragments)


State 140

   75 expression: expression EXPR_BEGIN_PAREN expr_comma_arguments . END_PAREN
  114 expr_comma_arguments: expr_comma_arguments . EXPR_COMMA expr_fragments

    END_PAREN   shift, and go to state 171
    EXPR_COMMA  shift, and go to state 172


State 141

    8 cmd_optional_whitespace: .  [BEGIN_BRACE]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   60 cmd_function_declaration: CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP . cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 173


State 142

   73 expression: expression . EXPR_ACCESS expression
   73           | expression EXPR_ACCESS expression .  [$end, END_PAREN, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_ACCESS, EXPR_EQUALS, EXPR_SEMICOLON, EXPR_ADD, EXPR_MINUS, EXPR_MULTIPLY, EXPR_DIVIDE, EXPR_BEGIN_PAREN, EXPR_TERMINATING_NEWLINE]
   74           | expression . EXPR_BEGIN_PAREN END_PAREN
   75           | expression . EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN
   76           | expression . EXPR_DIVIDE expression
   77           | expression . EXPR_MULTIPLY expression
   78           | expression . EXPR_ADD expression
   79           | expression . EXPR_MINUS expression

    $default  reduce using rule 73 (expression)

    Conflict between rule 73 and token EXPR_ACCESS resolved as reduce (%left EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_ADD resolved as reduce (EXPR_ADD < EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_MINUS resolved as reduce (EXPR_MINUS < EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_MULTIPLY resolved as reduce (EXPR_MULTIPLY < EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_DIVIDE resolved as reduce (EXPR_DIVIDE < EXPR_ACCESS).
    Conflict between rule 73 and token EXPR_BEGIN_PAREN resolved as reduce (EXPR_BEGIN_PAREN < EXPR_ACCESS).


State 143

    2 cmd_statements: . cmd_statement
    3               | . cmd_statements cmd_terminator cmd_statement
   11 cmd_statement: . cmd_pipeline CMD_AMPERSAND
   12              | . cmd_pipeline
   13              | . cmd_assignment
   14              | . CMD_COLON expression
   15              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE . cmd_statements END_BRACE
   18              | . KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | . KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   20              | . KEYWORD_RETURN CMD_WHITESPACE expression
   21              | .  [END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   24 cmd_assignment: . CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | . CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | . CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 3
    KEYWORD_DO         shift, and go to state 4
    KEYWORD_FOREACH    shift, and go to state 5
    KEYWORD_IF         shift, and go to state 6
    KEYWORD_RETURN     shift, and go to state 7
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_COLON          shift, and go to state 13
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    $default  reduce using rule 21 (cmd_statement)

    cmd_statements            go to state 174
    cmd_statement             go to state 18
    cmd_assignment            go to state 19
    cmd_pipeline              go to state 20
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 144

   18 cmd_statement: KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment

    KEYWORD_WHILE  shift, and go to state 175


State 145

    8 cmd_optional_whitespace: .  [CMD_DOLLAR]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   19 cmd_statement: KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS . cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 176


State 146

    2 cmd_statements: . cmd_statement
    3               | . cmd_statements cmd_terminator cmd_statement
   11 cmd_statement: . cmd_pipeline CMD_AMPERSAND
   12              | . cmd_pipeline
   13              | . cmd_assignment
   14              | . CMD_COLON expression
   15              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   15              | KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE . cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   16              | KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE . cmd_statements END_BRACE
   17              | . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   18              | . KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | . KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   20              | . KEYWORD_RETURN CMD_WHITESPACE expression
   21              | .  [END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   24 cmd_assignment: . CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | . CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | . CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 3
    KEYWORD_DO         shift, and go to state 4
    KEYWORD_FOREACH    shift, and go to state 5
    KEYWORD_IF         shift, and go to state 6
    KEYWORD_RETURN     shift, and go to state 7
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_COLON          shift, and go to state 13
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    $default  reduce using rule 21 (cmd_statement)

    cmd_statements            go to state 177
    cmd_statement             go to state 18
    cmd_assignment            go to state 19
    cmd_pipeline              go to state 20
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 147

   65 expr_key_values: expr_key_values EXPR_COMMA expr_key_name . EXPR_EQUALS expr_fragment
   66                | expr_key_values EXPR_COMMA expr_key_name .  [EXPR_COMMA, EXPR_END_SQUARE_BEGIN_COMMAND]

    EXPR_EQUALS  shift, and go to state 178

    $default  reduce using rule 66 (expr_key_values)


State 148

   28 cmd_pipeline: cmd_pipeline . CMD_PIPE cmd_instruction
   54 cmd_fragment: CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline . END_PAREN

    END_PAREN  shift, and go to state 179
    CMD_PIPE   shift, and go to state 67


State 149

   64 expr_key_values: expr_key_name EXPR_EQUALS expr_fragment .

    $default  reduce using rule 64 (expr_key_values)


State 150

   24 cmd_assignment: CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration .

    $default  reduce using rule 24 (cmd_assignment)


State 151

   62 expr_fragments_or_function_declaration: expr_function_declaration .

    $default  reduce using rule 62 (expr_fragments_or_function_declaration)


State 152

   61 expr_fragments_or_function_declaration: expr_fragments .  [$end, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   82 expr_fragments: expr_fragments . expr_fragment
   83               | expr_fragments . expr_keyword_as_string
   84 expr_keyword_as_string: . KEYWORD_IF
   85                       | . KEYWORD_ELSE
   86                       | . KEYWORD_WHILE
   87                       | . KEYWORD_FOR
   88                       | . KEYWORD_FOREACH
   89                       | . KEYWORD_DO
   90                       | . KEYWORD_BREAK
   91                       | . KEYWORD_CONTINUE
   92                       | . KEYWORD_AS
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    KEYWORD_WHILE       shift, and go to state 160
    KEYWORD_DO          shift, and go to state 161
    KEYWORD_FOR         shift, and go to state 162
    KEYWORD_FOREACH     shift, and go to state 163
    KEYWORD_BREAK       shift, and go to state 164
    KEYWORD_CONTINUE    shift, and go to state 165
    KEYWORD_IF          shift, and go to state 166
    KEYWORD_ELSE        shift, and go to state 167
    KEYWORD_AS          shift, and go to state 168
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    $default  reduce using rule 61 (expr_fragments_or_function_declaration)

    expr_fragment_or_variable  go to state 50
    expr_keyword_as_string     go to state 169
    expr_fragment              go to state 170
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 153

   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
  102 expr_fragment: EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND . cmd_pipeline END_PAREN

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    cmd_pipeline              go to state 180
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 154

  110 expr_array_element: expr_fragment EXPR_MAP expr_fragment .

    $default  reduce using rule 110 (expr_array_element)


State 155

  107 expr_array_decl: EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN .

    $default  reduce using rule 107 (expr_array_decl)


State 156

  109 expr_array_def: expr_array_def EXPR_COMMA expr_array_element .

    $default  reduce using rule 109 (expr_array_def)


State 157

    2 cmd_statements: . cmd_statement
    3               | . cmd_statements cmd_terminator cmd_statement
   11 cmd_statement: . cmd_pipeline CMD_AMPERSAND
   12              | . cmd_pipeline
   13              | . cmd_assignment
   14              | . CMD_COLON expression
   15              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   18              | . KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | . KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   20              | . KEYWORD_RETURN CMD_WHITESPACE expression
   21              | .  [END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   24 cmd_assignment: . CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | . CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | . CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   71 expr_function_declaration: EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE . cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 3
    KEYWORD_DO         shift, and go to state 4
    KEYWORD_FOREACH    shift, and go to state 5
    KEYWORD_IF         shift, and go to state 6
    KEYWORD_RETURN     shift, and go to state 7
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_COLON          shift, and go to state 13
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    $default  reduce using rule 21 (cmd_statement)

    cmd_statements            go to state 181
    cmd_statement             go to state 18
    cmd_assignment            go to state 19
    cmd_pipeline              go to state 20
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 158

   26 cmd_assignment: CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE . EXPR_EQUALS expr_fragments_or_function_declaration

    EXPR_EQUALS  shift, and go to state 182


State 159

   25 cmd_assignment: CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS . expr_fragments_or_function_declaration
   61 expr_fragments_or_function_declaration: . expr_fragments
   62                                       | . expr_function_declaration
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   81 expr_fragments: . expr_fragment
   82               | . expr_fragments expr_fragment
   83               | . expr_fragments expr_keyword_as_string
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragments_or_function_declaration  go to state 183
    expr_fragment_or_variable               go to state 50
    expr_function_declaration               go to state 151
    expr_fragments                          go to state 152
    expr_fragment                           go to state 139
    expr_array_decl                         go to state 54
    expr_number                             go to state 55


State 160

   86 expr_keyword_as_string: KEYWORD_WHILE .

    $default  reduce using rule 86 (expr_keyword_as_string)


State 161

   89 expr_keyword_as_string: KEYWORD_DO .

    $default  reduce using rule 89 (expr_keyword_as_string)


State 162

   87 expr_keyword_as_string: KEYWORD_FOR .

    $default  reduce using rule 87 (expr_keyword_as_string)


State 163

   88 expr_keyword_as_string: KEYWORD_FOREACH .

    $default  reduce using rule 88 (expr_keyword_as_string)


State 164

   90 expr_keyword_as_string: KEYWORD_BREAK .

    $default  reduce using rule 90 (expr_keyword_as_string)


State 165

   91 expr_keyword_as_string: KEYWORD_CONTINUE .

    $default  reduce using rule 91 (expr_keyword_as_string)


State 166

   84 expr_keyword_as_string: KEYWORD_IF .

    $default  reduce using rule 84 (expr_keyword_as_string)


State 167

   85 expr_keyword_as_string: KEYWORD_ELSE .

    $default  reduce using rule 85 (expr_keyword_as_string)


State 168

   92 expr_keyword_as_string: KEYWORD_AS .

    $default  reduce using rule 92 (expr_keyword_as_string)


State 169

   83 expr_fragments: expr_fragments expr_keyword_as_string .

    $default  reduce using rule 83 (expr_fragments)


State 170

   82 expr_fragments: expr_fragments expr_fragment .

    $default  reduce using rule 82 (expr_fragments)


State 171

   75 expression: expression EXPR_BEGIN_PAREN expr_comma_arguments END_PAREN .

    $default  reduce using rule 75 (expression)


State 172

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   81 expr_fragments: . expr_fragment
   82               | . expr_fragments expr_fragment
   83               | . expr_fragments expr_keyword_as_string
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER
  114 expr_comma_arguments: expr_comma_arguments EXPR_COMMA . expr_fragments

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    expr_fragment_or_variable  go to state 50
    expr_fragments             go to state 184
    expr_fragment              go to state 139
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 173

   60 cmd_function_declaration: CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace . BEGIN_BRACE cmd_statements END_BRACE

    BEGIN_BRACE  shift, and go to state 185


State 174

    3 cmd_statements: cmd_statements . cmd_terminator cmd_statement
    4 cmd_terminator: . CMD_TERMINATING_NEWLINE
    5               | . EXPR_TERMINATING_NEWLINE
    6               | . CMD_SEMICOLON
    7               | . EXPR_SEMICOLON
   17 cmd_statement: KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements . END_BRACE

    END_BRACE                 shift, and go to state 186
    CMD_TERMINATING_NEWLINE   shift, and go to state 61
    CMD_SEMICOLON             shift, and go to state 62
    EXPR_SEMICOLON            shift, and go to state 63
    EXPR_TERMINATING_NEWLINE  shift, and go to state 64

    cmd_terminator  go to state 65


State 175

    8 cmd_optional_whitespace: .  [SINGLE_QUOTED, DOUBLE_QUOTED, VARIABLE, CMD_FRAGMENT, CMD_MAP, CMD_NUMBER, CMD_DOLLAR, CMD_BEGIN_COMMAND, CMD_BEGIN_PAREN]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   18 cmd_statement: KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE . cmd_optional_whitespace cmd_fragment

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 187


State 176

   19 cmd_statement: KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace . cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   22 cmd_mapping: . CMD_DOLLAR VARIABLE cmd_optional_whitespace CMD_MAP cmd_optional_whitespace CMD_DOLLAR VARIABLE cmd_optional_whitespace
   23            | . CMD_DOLLAR VARIABLE cmd_optional_whitespace

    CMD_DOLLAR  shift, and go to state 188

    cmd_mapping  go to state 189


State 177

    3 cmd_statements: cmd_statements . cmd_terminator cmd_statement
    4 cmd_terminator: . CMD_TERMINATING_NEWLINE
    5               | . EXPR_TERMINATING_NEWLINE
    6               | . CMD_SEMICOLON
    7               | . EXPR_SEMICOLON
   15 cmd_statement: KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements . END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements . END_BRACE

    END_BRACE                 shift, and go to state 190
    CMD_TERMINATING_NEWLINE   shift, and go to state 61
    CMD_SEMICOLON             shift, and go to state 62
    EXPR_SEMICOLON            shift, and go to state 63
    EXPR_TERMINATING_NEWLINE  shift, and go to state 64

    cmd_terminator  go to state 65


State 178

   65 expr_key_values: expr_key_values EXPR_COMMA expr_key_name EXPR_EQUALS . expr_fragment
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    expr_fragment_or_variable  go to state 50
    expr_fragment              go to state 191
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 179

   54 cmd_fragment: CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN .

    $default  reduce using rule 54 (cmd_fragment)


State 180

   28 cmd_pipeline: cmd_pipeline . CMD_PIPE cmd_instruction
  102 expr_fragment: EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline . END_PAREN

    END_PAREN  shift, and go to state 192
    CMD_PIPE   shift, and go to state 67


State 181

    3 cmd_statements: cmd_statements . cmd_terminator cmd_statement
    4 cmd_terminator: . CMD_TERMINATING_NEWLINE
    5               | . EXPR_TERMINATING_NEWLINE
    6               | . CMD_SEMICOLON
    7               | . EXPR_SEMICOLON
   71 expr_function_declaration: EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements . END_BRACE

    END_BRACE                 shift, and go to state 193
    CMD_TERMINATING_NEWLINE   shift, and go to state 61
    CMD_SEMICOLON             shift, and go to state 62
    EXPR_SEMICOLON            shift, and go to state 63
    EXPR_TERMINATING_NEWLINE  shift, and go to state 64

    cmd_terminator  go to state 65


State 182

   26 cmd_assignment: CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS . expr_fragments_or_function_declaration
   61 expr_fragments_or_function_declaration: . expr_fragments
   62                                       | . expr_function_declaration
   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   71 expr_function_declaration: . EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE
   81 expr_fragments: . expr_fragment
   82               | . expr_fragments expr_fragment
   83               | . expr_fragments expr_keyword_as_string
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 49

    expr_fragments_or_function_declaration  go to state 194
    expr_fragment_or_variable               go to state 50
    expr_function_declaration               go to state 151
    expr_fragments                          go to state 152
    expr_fragment                           go to state 139
    expr_array_decl                         go to state 54
    expr_number                             go to state 55


State 183

   25 cmd_assignment: CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration .

    $default  reduce using rule 25 (cmd_assignment)


State 184

   69 expr_fragment_or_variable: . EXPR_FRAGMENT
   70                          | . VARIABLE
   82 expr_fragments: expr_fragments . expr_fragment
   83               | expr_fragments . expr_keyword_as_string
   84 expr_keyword_as_string: . KEYWORD_IF
   85                       | . KEYWORD_ELSE
   86                       | . KEYWORD_WHILE
   87                       | . KEYWORD_FOR
   88                       | . KEYWORD_FOREACH
   89                       | . KEYWORD_DO
   90                       | . KEYWORD_BREAK
   91                       | . KEYWORD_CONTINUE
   92                       | . KEYWORD_AS
   93 expr_fragment: . expr_fragment_or_variable
   94              | . expr_number
   95              | . PHP
   96              | . SINGLE_QUOTED
   97              | . DOUBLE_QUOTED
   98              | . EXPR_DOLLAR VARIABLE
   99              | . EXPR_DOLLAR EXPR_NUMBER
  100              | . EXPR_DOLLAR QUESTION_MARK
  101              | . EXPR_BEGIN_COMMAND cmd_pipeline END_PAREN
  102              | . EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
  103              | . EXPR_BEGIN_PAREN expression END_PAREN
  104              | . expr_array_decl
  105 expr_array_decl: . EXPR_BEGIN_ARRAY END_PAREN
  106                | . EXPR_BEGIN_ARRAY expr_array_def END_PAREN
  107                | . EXPR_BEGIN_ARRAY expr_array_def EXPR_COMMA END_PAREN
  112 expr_number: . EXPR_NUMBER
  114 expr_comma_arguments: expr_comma_arguments EXPR_COMMA expr_fragments .  [END_PAREN, EXPR_COMMA]

    SINGLE_QUOTED       shift, and go to state 40
    DOUBLE_QUOTED       shift, and go to state 41
    KEYWORD_WHILE       shift, and go to state 160
    KEYWORD_DO          shift, and go to state 161
    KEYWORD_FOR         shift, and go to state 162
    KEYWORD_FOREACH     shift, and go to state 163
    KEYWORD_BREAK       shift, and go to state 164
    KEYWORD_CONTINUE    shift, and go to state 165
    KEYWORD_IF          shift, and go to state 166
    KEYWORD_ELSE        shift, and go to state 167
    KEYWORD_AS          shift, and go to state 168
    VARIABLE            shift, and go to state 42
    PHP                 shift, and go to state 43
    EXPR_FRAGMENT       shift, and go to state 44
    EXPR_NUMBER         shift, and go to state 45
    EXPR_DOLLAR         shift, and go to state 58
    EXPR_BEGIN_COMMAND  shift, and go to state 47
    EXPR_BEGIN_ARRAY    shift, and go to state 48
    EXPR_BEGIN_PAREN    shift, and go to state 96

    $default  reduce using rule 114 (expr_comma_arguments)

    expr_fragment_or_variable  go to state 50
    expr_keyword_as_string     go to state 169
    expr_fragment              go to state 170
    expr_array_decl            go to state 54
    expr_number                go to state 55


State 185

    2 cmd_statements: . cmd_statement
    3               | . cmd_statements cmd_terminator cmd_statement
   11 cmd_statement: . cmd_pipeline CMD_AMPERSAND
   12              | . cmd_pipeline
   13              | . cmd_assignment
   14              | . CMD_COLON expression
   15              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   18              | . KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | . KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   20              | . KEYWORD_RETURN CMD_WHITESPACE expression
   21              | .  [END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   24 cmd_assignment: . CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | . CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | . CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   60                         | CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE . cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 3
    KEYWORD_DO         shift, and go to state 4
    KEYWORD_FOREACH    shift, and go to state 5
    KEYWORD_IF         shift, and go to state 6
    KEYWORD_RETURN     shift, and go to state 7
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_COLON          shift, and go to state 13
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    $default  reduce using rule 21 (cmd_statement)

    cmd_statements            go to state 195
    cmd_statement             go to state 18
    cmd_assignment            go to state 19
    cmd_pipeline              go to state 20
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 186

   17 cmd_statement: KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE .

    $default  reduce using rule 17 (cmd_statement)


State 187

   18 cmd_statement: KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace . cmd_fragment
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 78

    cmd_fragment              go to state 196
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27


State 188

   22 cmd_mapping: CMD_DOLLAR . VARIABLE cmd_optional_whitespace CMD_MAP cmd_optional_whitespace CMD_DOLLAR VARIABLE cmd_optional_whitespace
   23            | CMD_DOLLAR . VARIABLE cmd_optional_whitespace

    VARIABLE  shift, and go to state 197


State 189

   19 cmd_statement: KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping . BEGIN_BRACE cmd_statements END_BRACE

    BEGIN_BRACE  shift, and go to state 198


State 190

   15 cmd_statement: KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE . KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE .  [$end, END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]

    KEYWORD_ELSE  shift, and go to state 199

    $default  reduce using rule 16 (cmd_statement)


State 191

   65 expr_key_values: expr_key_values EXPR_COMMA expr_key_name EXPR_EQUALS expr_fragment .

    $default  reduce using rule 65 (expr_key_values)


State 192

  102 expr_fragment: EXPR_DOLLAR EXPR_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN .

    $default  reduce using rule 102 (expr_fragment)


State 193

   71 expr_function_declaration: EXPR_BEGIN_PAREN END_PAREN EXPR_MAP BEGIN_BRACE cmd_statements END_BRACE .

    $default  reduce using rule 71 (expr_function_declaration)


State 194

   26 cmd_assignment: CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration .

    $default  reduce using rule 26 (cmd_assignment)


State 195

    3 cmd_statements: cmd_statements . cmd_terminator cmd_statement
    4 cmd_terminator: . CMD_TERMINATING_NEWLINE
    5               | . EXPR_TERMINATING_NEWLINE
    6               | . CMD_SEMICOLON
    7               | . EXPR_SEMICOLON
   60 cmd_function_declaration: CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements . END_BRACE

    END_BRACE                 shift, and go to state 200
    CMD_TERMINATING_NEWLINE   shift, and go to state 61
    CMD_SEMICOLON             shift, and go to state 62
    EXPR_SEMICOLON            shift, and go to state 63
    EXPR_TERMINATING_NEWLINE  shift, and go to state 64

    cmd_terminator  go to state 65


State 196

   18 cmd_statement: KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment .

    $default  reduce using rule 18 (cmd_statement)


State 197

    8 cmd_optional_whitespace: .  [BEGIN_BRACE, CMD_MAP]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   22 cmd_mapping: CMD_DOLLAR VARIABLE . cmd_optional_whitespace CMD_MAP cmd_optional_whitespace CMD_DOLLAR VARIABLE cmd_optional_whitespace
   23            | CMD_DOLLAR VARIABLE . cmd_optional_whitespace

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 201


State 198

    2 cmd_statements: . cmd_statement
    3               | . cmd_statements cmd_terminator cmd_statement
   11 cmd_statement: . cmd_pipeline CMD_AMPERSAND
   12              | . cmd_pipeline
   13              | . cmd_assignment
   14              | . CMD_COLON expression
   15              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   16              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   18              | . KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | . KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   19              | KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE . cmd_statements END_BRACE
   20              | . KEYWORD_RETURN CMD_WHITESPACE expression
   21              | .  [END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   24 cmd_assignment: . CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | . CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | . CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 3
    KEYWORD_DO         shift, and go to state 4
    KEYWORD_FOREACH    shift, and go to state 5
    KEYWORD_IF         shift, and go to state 6
    KEYWORD_RETURN     shift, and go to state 7
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_COLON          shift, and go to state 13
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    $default  reduce using rule 21 (cmd_statement)

    cmd_statements            go to state 202
    cmd_statement             go to state 18
    cmd_assignment            go to state 19
    cmd_pipeline              go to state 20
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 199

   15 cmd_statement: KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE . BEGIN_BRACE cmd_statements END_BRACE

    BEGIN_BRACE  shift, and go to state 203


State 200

   60 cmd_function_declaration: CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE .

    $default  reduce using rule 60 (cmd_function_declaration)


State 201

   22 cmd_mapping: CMD_DOLLAR VARIABLE cmd_optional_whitespace . CMD_MAP cmd_optional_whitespace CMD_DOLLAR VARIABLE cmd_optional_whitespace
   23            | CMD_DOLLAR VARIABLE cmd_optional_whitespace .  [BEGIN_BRACE]

    CMD_MAP  shift, and go to state 204

    $default  reduce using rule 23 (cmd_mapping)


State 202

    3 cmd_statements: cmd_statements . cmd_terminator cmd_statement
    4 cmd_terminator: . CMD_TERMINATING_NEWLINE
    5               | . EXPR_TERMINATING_NEWLINE
    6               | . CMD_SEMICOLON
    7               | . EXPR_SEMICOLON
   19 cmd_statement: KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements . END_BRACE

    END_BRACE                 shift, and go to state 205
    CMD_TERMINATING_NEWLINE   shift, and go to state 61
    CMD_SEMICOLON             shift, and go to state 62
    EXPR_SEMICOLON            shift, and go to state 63
    EXPR_TERMINATING_NEWLINE  shift, and go to state 64

    cmd_terminator  go to state 65


State 203

    2 cmd_statements: . cmd_statement
    3               | . cmd_statements cmd_terminator cmd_statement
   11 cmd_statement: . cmd_pipeline CMD_AMPERSAND
   12              | . cmd_pipeline
   13              | . cmd_assignment
   14              | . CMD_COLON expression
   15              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE
   15              | KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE . cmd_statements END_BRACE
   16              | . KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   17              | . KEYWORD_WHILE cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE
   18              | . KEYWORD_DO cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_WHILE cmd_optional_whitespace cmd_fragment
   19              | . KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE
   20              | . KEYWORD_RETURN CMD_WHITESPACE expression
   21              | .  [END_BRACE, CMD_TERMINATING_NEWLINE, CMD_SEMICOLON, EXPR_SEMICOLON, EXPR_TERMINATING_NEWLINE]
   24 cmd_assignment: . CMD_COLON EXPR_DOLLAR VARIABLE EXPR_EQUALS expr_fragments_or_function_declaration
   25               | . CMD_COLON expression EXPR_ACCESS expression EXPR_EQUALS expr_fragments_or_function_declaration
   26               | . CMD_COLON expression EXPR_ACCESS EXPR_BEGIN_SQUARE END_SQUARE EXPR_EQUALS expr_fragments_or_function_declaration
   27 cmd_pipeline: . cmd_instruction
   28             | . cmd_pipeline CMD_PIPE cmd_instruction
   29 cmd_instruction: . cmd_command
   30                | . cmd_function_declaration
   31 cmd_command: . cmd_arguments
   32 cmd_arguments: . cmd_fragments
   33              | . cmd_arguments CMD_WHITESPACE cmd_fragments
   34 cmd_fragments: . cmd_fragment
   35              | . cmd_fragments cmd_fragment
   36              | . cmd_fragments cmd_keyword_as_string
   46 cmd_fragment: . cmd_fragment_or_variable
   47             | . cmd_number
   48             | . SINGLE_QUOTED
   49             | . DOUBLE_QUOTED
   50             | . CMD_DOLLAR VARIABLE
   51             | . CMD_DOLLAR CMD_NUMBER
   52             | . CMD_DOLLAR QUESTION_MARK
   53             | . CMD_BEGIN_COMMAND cmd_pipeline END_PAREN
   54             | . CMD_DOLLAR CMD_BEGIN_SQUARE expr_key_values EXPR_END_SQUARE_BEGIN_COMMAND cmd_pipeline END_PAREN
   55             | . CMD_BEGIN_PAREN expression END_PAREN
   56 cmd_number: . CMD_NUMBER
   57 cmd_fragment_or_variable: . CMD_MAP
   58                         | . CMD_FRAGMENT
   59                         | . VARIABLE
   60 cmd_function_declaration: . CMD_BEGIN_PAREN END_PAREN cmd_optional_whitespace CMD_MAP cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE

    SINGLE_QUOTED      shift, and go to state 1
    DOUBLE_QUOTED      shift, and go to state 2
    KEYWORD_WHILE      shift, and go to state 3
    KEYWORD_DO         shift, and go to state 4
    KEYWORD_FOREACH    shift, and go to state 5
    KEYWORD_IF         shift, and go to state 6
    KEYWORD_RETURN     shift, and go to state 7
    VARIABLE           shift, and go to state 8
    CMD_FRAGMENT       shift, and go to state 9
    CMD_MAP            shift, and go to state 10
    CMD_NUMBER         shift, and go to state 11
    CMD_DOLLAR         shift, and go to state 12
    CMD_COLON          shift, and go to state 13
    CMD_BEGIN_COMMAND  shift, and go to state 14
    CMD_BEGIN_PAREN    shift, and go to state 15

    $default  reduce using rule 21 (cmd_statement)

    cmd_statements            go to state 206
    cmd_statement             go to state 18
    cmd_assignment            go to state 19
    cmd_pipeline              go to state 20
    cmd_instruction           go to state 21
    cmd_command               go to state 22
    cmd_arguments             go to state 23
    cmd_fragments             go to state 24
    cmd_fragment              go to state 25
    cmd_number                go to state 26
    cmd_fragment_or_variable  go to state 27
    cmd_function_declaration  go to state 28


State 204

    8 cmd_optional_whitespace: .  [CMD_DOLLAR]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   22 cmd_mapping: CMD_DOLLAR VARIABLE cmd_optional_whitespace CMD_MAP . cmd_optional_whitespace CMD_DOLLAR VARIABLE cmd_optional_whitespace

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 207


State 205

   19 cmd_statement: KEYWORD_FOREACH cmd_optional_whitespace cmd_fragment cmd_optional_whitespace KEYWORD_AS cmd_optional_whitespace cmd_mapping BEGIN_BRACE cmd_statements END_BRACE .

    $default  reduce using rule 19 (cmd_statement)


State 206

    3 cmd_statements: cmd_statements . cmd_terminator cmd_statement
    4 cmd_terminator: . CMD_TERMINATING_NEWLINE
    5               | . EXPR_TERMINATING_NEWLINE
    6               | . CMD_SEMICOLON
    7               | . EXPR_SEMICOLON
   15 cmd_statement: KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements . END_BRACE

    END_BRACE                 shift, and go to state 208
    CMD_TERMINATING_NEWLINE   shift, and go to state 61
    CMD_SEMICOLON             shift, and go to state 62
    EXPR_SEMICOLON            shift, and go to state 63
    EXPR_TERMINATING_NEWLINE  shift, and go to state 64

    cmd_terminator  go to state 65


State 207

   22 cmd_mapping: CMD_DOLLAR VARIABLE cmd_optional_whitespace CMD_MAP cmd_optional_whitespace . CMD_DOLLAR VARIABLE cmd_optional_whitespace

    CMD_DOLLAR  shift, and go to state 209


State 208

   15 cmd_statement: KEYWORD_IF cmd_optional_whitespace cmd_fragment cmd_optional_whitespace BEGIN_BRACE cmd_statements END_BRACE KEYWORD_ELSE BEGIN_BRACE cmd_statements END_BRACE .

    $default  reduce using rule 15 (cmd_statement)


State 209

   22 cmd_mapping: CMD_DOLLAR VARIABLE cmd_optional_whitespace CMD_MAP cmd_optional_whitespace CMD_DOLLAR . VARIABLE cmd_optional_whitespace

    VARIABLE  shift, and go to state 210


State 210

    8 cmd_optional_whitespace: .  [BEGIN_BRACE]
    9                        | . CMD_WHITESPACE
   10                        | . CMD_TERMINATING_NEWLINE
   22 cmd_mapping: CMD_DOLLAR VARIABLE cmd_optional_whitespace CMD_MAP cmd_optional_whitespace CMD_DOLLAR VARIABLE . cmd_optional_whitespace

    CMD_WHITESPACE           shift, and go to state 29
    CMD_TERMINATING_NEWLINE  shift, and go to state 30

    $default  reduce using rule 8 (cmd_optional_whitespace)

    cmd_optional_whitespace  go to state 211


State 211

   22 cmd_mapping: CMD_DOLLAR VARIABLE cmd_optional_whitespace CMD_MAP cmd_optional_whitespace CMD_DOLLAR VARIABLE cmd_optional_whitespace .

    $default  reduce using rule 22 (cmd_mapping)
